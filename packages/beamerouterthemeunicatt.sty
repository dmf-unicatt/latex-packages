% Copyright 2007 by Marco Barisione (originally named beamerouterthemedecolines.sty)
% Copyright 2015 by Francesco Ballarin
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.

\mode<presentation>

% String used between the current page and the total page count.
\def\unicatt@pageofpages{/}
\DeclareOptionBeamer{pageofpages}{\def\unicatt@pageofpages{#1}}

% Show a line below the frame title.
\DeclareOptionBeamer{titleline}[true]{\def\unicatt@titleline{#1}}
\ExecuteOptionsBeamer{titleline=true}
\ProcessOptionsBeamer

% Colors.
\setbeamercolor*{lineup}{parent=palette primary}
\setbeamercolor*{linemid}{parent=palette secondary}
\setbeamercolor*{linebottom}{parent=palette secondary}
\setbeamercolor*{page header}{parent=titlelike}

% Lengths
\newlength{\headerheight}
\setlength{\headerheight}{.01\paperheight}
\newlength{\footerheight}
\setlength{\footerheight}{.025\paperheight}

% Header.
\defbeamertemplate*{headline}{unicatt theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.8\paperwidth,ht=\headerheight,dp=0pt]{lineup}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.2\paperwidth,ht=\headerheight,dp=0pt]{linebottom}%
  \end{beamercolorbox}%
  } %
  \vskip0pt%
}

% Footer.
\defbeamertemplate*{footline}{unicatt theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.2\paperwidth,ht=\footerheight,dp=0pt,center]{lineup}%
    \vbox to \footerheight{\vfil%
    \color{secondary_color_alpha}\usebeamerfont{palette primary}%
    \insertframenumber{}\unicatt@pageofpages{} \inserttotalframenumber%
    \vfil}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.8\paperwidth,ht=\footerheight,dp=0pt]{linebottom}%
    \vbox to \footerheight{\vfil%
    \color{white}\usebeamerfont{palette primary}%
    \; \insertshortauthor\ %
    \quad%
    \color{secondary_color_alpha}\usebeamerfont{palette primary}%
    \beamer@shorttitle%
    \vfil}%
  \end{beamercolorbox}%
  } %
}

% Slides title.
\defbeamertemplate*{frametitle}{unicatt theme}[1][left]
{
  \ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
  \@tempdima=\textwidth%
  \advance\@tempdima by\beamer@leftmargin%
  \advance\@tempdima by\beamer@rightmargin%
  \vbox{}\vskip-.5\beamer@leftmargin%
  \begin{beamercolorbox}[sep=\beamer@leftmargin,#1,wd=\the\@tempdima]{}
    \usebeamerfont{frametitle}\usebeamercolor[bg]{framesubtitle}%
    \vbox{}\vskip-1.75ex%
    \if@tempswa\else\csname beamer@fte#1\endcsname\fi%
    \strut\insertframetitle\strut\par%
    {%
      \ifx\insertframesubtitle\@empty%
      \else%
      {\usebeamerfont{framesubtitle}\usebeamercolor[bg]{framesubtitle}\insertframesubtitle\strut\par}%
      \fi
    }%
    \vskip-0.5ex%
    \if@tempswa\else\vskip-\beamer@leftmargin\fi
  \end{beamercolorbox}%
  \def\unicatt@truetext{true}%
  \ifx\unicatt@titleline\unicatt@truetext%
    \vskip-.43\beamer@leftmargin%
    \begin{beamercolorbox}[wd=\textwidth,ht=.1ex,dp=0ex]{lineup}%
    \end{beamercolorbox}%
  \fi
}

% Frame title continuations, default
\defbeamertemplate*{frametitle continuation}{unicatt theme}{(\insertcontinuationcount)}

\defbeamertemplate*{sidebar right}{unicatt theme}
{
  \vskip.1\beamer@leftmargin%
  \llap{\insertlogo\hskip.5\beamer@leftmargin}%
  \vfill%
}

\mode
<all>
