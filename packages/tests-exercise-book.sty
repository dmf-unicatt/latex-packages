\RequirePackage{tests-common}

% Pass the academic year to the actual exercise-book package
\RequirePackage{exercise-book}
\ExplSyntaxOn
\DeclareOption*{
  \edef\temp{\noexpand\keys_set:nn { exercise-book } { \CurrentOption }}
  \temp
}
\ProcessOptions\relax
\ExplSyntaxOff

% Show labels for debugging
\RequirePackage{showkeys}

% Force hyperref to print the link target, so that it is visible when converting to text file
\RequirePackage{sidenotes}
\RenewDocumentCommand{\linktoxsimenv}{m m}{%
  \hyperref[#1]{#2}\sidenote{\footnotesize Links to label #1, counter value \ref*{#1}}%
}
\RenewDocumentCommand{\linktosection}{m}{%
  \nameref{#1}\sidenote{\footnotesize Links to label #1, counter value \ref*{#1}}%
}
\let\oldcref\cref
\RenewDocumentCommand{\cref}{m}{%
  \oldcref{#1}\sidenote{\footnotesize Links to label #1, counter value \ref*{#1}}%
}
\let\oldCref\Cref
\RenewDocumentCommand{\Cref}{m}{%
  \oldCref{#1}\sidenote{\footnotesize Links to label #1, counter value \ref*{#1}}%
}
